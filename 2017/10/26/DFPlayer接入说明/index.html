<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>DFPlayer接入说明 | ihoudf</title>
  
  
  <link rel="icon" type="image/x-icon" href="/favicon.png">
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/header.png)">
        <div class='av-pic' style="background-image: url(/assets/ihoudf.png)">
        </div>
    </section>
    <section class='menu'>
        <div>ihoudf</div>
        
        <ul>
          
            <a href="/" class="Btn" target="blank">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn" target="blank">
              <li>Archive</li>
            </a>  
          
            <a href="http://blog.csdn.net/hdfqq188816190" class="Btn" target="blank">
              <li>CSDN</li>
            </a>  
          
            <a href="https://github.com/ihoudf" class="Btn" target="blank">
              <li>Github</li>
            </a>  
          
            <a href="https://ihoudfs.github.io/about.html" class="Btn" target="blank">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1>DFPlayer接入说明</h1>
    </header>

    <section>
      <p><img src="https://github.com/ihoudf/DFPlayer/blob/master/DFPlayerLogo/dfplayer_logo388x83.png?raw=true" width="260"><br><a href="https://github.com/ihoudf/DFPlayer" target="_blank" rel="external"><img src="https://img.shields.io/badge/build-passing-green.svg"></a>&nbsp;<a href="https://github.com/ihoudf/DFPlayer" target="_blank" rel="external"><img src="https://img.shields.io/badge/pod-1.0.2-yellow.svg"></a>&nbsp;<a href="https://github.com/ihoudf/DFPlayer/blob/master/LICENSE" target="blank"><img src="https://img.shields.io/badge/license-MIT-brightgreen.svg"></a>&nbsp;<a href="https://github.com/ihoudf/DFPlayer" target="_blank" rel="external"><img src="https://img.shields.io/badge/platform-iOS-blue.svg"></a>&nbsp;<a href="https://github.com/ihoudf/DFPlayer" target="_blank" rel="external"><img src="https://img.shields.io/badge/support-iOS%207%2B-yellowgreen.svg"></a>&nbsp;<a href="https://ihoudf.github.io/" target="blank"><img src="https://img.shields.io/badge/homepage-ihoudf-brightgreen.svg"></a></p>
<h4 id="A-simple-and-flexible-iOS-audio-playback-module-Based-on-AVPlayer-support-local-and-remote-audio-playback-with-caching-remote-control-locking-and-control-center-information-display-single-sequential-and-random-playback-Lyrics-sync-and-other-basic-audio-player-functions-using-a-few-code-can-realize-the-function-of-player-（简单又灵活的iOS音频播放组件。基于AVPlayer，支持本地和远程音频播放，具有缓存、耳机线控、锁频和控制中心信息展示、单曲顺序随机播放、歌词同步、记录上次播放进度等基本的音频播放器功能，DFPlayer封装了播放暂停按钮、进度条等UI控件，一行代码布局即可实现相应功能。）"><a href="#A-simple-and-flexible-iOS-audio-playback-module-Based-on-AVPlayer-support-local-and-remote-audio-playback-with-caching-remote-control-locking-and-control-center-information-display-single-sequential-and-random-playback-Lyrics-sync-and-other-basic-audio-player-functions-using-a-few-code-can-realize-the-function-of-player-（简单又灵活的iOS音频播放组件。基于AVPlayer，支持本地和远程音频播放，具有缓存、耳机线控、锁频和控制中心信息展示、单曲顺序随机播放、歌词同步、记录上次播放进度等基本的音频播放器功能，DFPlayer封装了播放暂停按钮、进度条等UI控件，一行代码布局即可实现相应功能。）" class="headerlink" title="A simple and flexible iOS audio playback module. Based on AVPlayer, support local and remote audio playback, with caching, remote control, locking and control center information display, single sequential and random playback,Lyrics sync,and other basic audio player functions, using a few code can realize the function of player.（简单又灵活的iOS音频播放组件。基于AVPlayer，支持本地和远程音频播放，具有缓存、耳机线控、锁频和控制中心信息展示、单曲顺序随机播放、歌词同步、记录上次播放进度等基本的音频播放器功能，DFPlayer封装了播放暂停按钮、进度条等UI控件，一行代码布局即可实现相应功能。）"></a>A simple and flexible iOS audio playback module. Based on AVPlayer, support local and remote audio playback, with caching, remote control, locking and control center information display, single sequential and random playback,Lyrics sync,and other basic audio player functions, using a few code can realize the function of player.（简单又灵活的iOS音频播放组件。基于AVPlayer，支持本地和远程音频播放，具有缓存、耳机线控、锁频和控制中心信息展示、单曲顺序随机播放、歌词同步、记录上次播放进度等基本的音频播放器功能，DFPlayer封装了播放暂停按钮、进度条等UI控件，一行代码布局即可实现相应功能。）</h4><blockquote>
<h4 id="DFPlayer：关于iOS音频播放，传音频数据给我就好了🙃"><a href="#DFPlayer：关于iOS音频播放，传音频数据给我就好了🙃" class="headerlink" title="DFPlayer：关于iOS音频播放，传音频数据给我就好了🙃"></a>DFPlayer：关于iOS音频播放，传音频数据给我就好了🙃</h4><h4 id="If-possible-please-give-me-a-star-in-github-✧-≖-◡-≖✿-🌹"><a href="#If-possible-please-give-me-a-star-in-github-✧-≖-◡-≖✿-🌹" class="headerlink" title="If possible, please give me a star in github.✧(≖ ◡ ≖✿)🌹"></a>If possible, please give me a star in github.✧(≖ ◡ ≖✿)🌹</h4><blockquote>
<h4 id="github地址-https-github-com-ihoudf-DFPlayer"><a href="#github地址-https-github-com-ihoudf-DFPlayer" class="headerlink" title="github地址:https://github.com/ihoudf/DFPlayer"></a>github地址:<a href="https://github.com/ihoudf/DFPlayer" target="_blank" rel="external">https://github.com/ihoudf/DFPlayer</a></h4><h4 id="视频介绍-http-www-iqiyi-com-w-19ruzcqjqh-html"><a href="#视频介绍-http-www-iqiyi-com-w-19ruzcqjqh-html" class="headerlink" title="视频介绍:http://www.iqiyi.com/w_19ruzcqjqh.html"></a>视频介绍:<a href="http://www.iqiyi.com/w_19ruzcqjqh.html" target="_blank" rel="external">http://www.iqiyi.com/w_19ruzcqjqh.html</a></h4></blockquote>
</blockquote>
<a id="more"></a>
<blockquote>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><blockquote>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><a href="#df-install">安装</a></h3><h3 id="接入方法"><a href="#接入方法" class="headerlink" title="接入方法"></a><a href="#df-use">接入方法</a></h3><h3 id="详细文档"><a href="#详细文档" class="headerlink" title="详细文档"></a><a href="#df-doc">详细文档</a></h3></blockquote>
</blockquote>
<div id="df-install"></div>

<p><br></p>
<blockquote>
<blockquote>
<h3 id="安装（最低支持-iOS-7-0）"><a href="#安装（最低支持-iOS-7-0）" class="headerlink" title="安装（最低支持 iOS 7.0）"></a>安装（最低支持 iOS 7.0）</h3></blockquote>
</blockquote>
<h5 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods:"></a>CocoaPods:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">在 Podfile 中添加:  pod &apos;DFPlayer&apos;</div><div class="line">执行 pod install 或 pod update</div><div class="line">import &quot;DFPlayer.h&quot;</div></pre></td></tr></table></figure>
<h5 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装:"></a>手动安装:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">下载 DFPlayer 文件夹内的所有内容</div><div class="line">将 DFPlayer文件夹添加(拖放)到你的工程</div><div class="line">import &quot;DFPlayer.h&quot;</div></pre></td></tr></table></figure>
<ul>
<li>DFPLayer使用AFNetworkReachabilityManager进行网络监测，如正在使用AFNetworking，删除DFPlayer中的相关文件。<br><br><div id="df-use"></div>

</li>
</ul>
<p><br></p>
<blockquote>
<blockquote>
<h3 id="接入方法-1"><a href="#接入方法-1" class="headerlink" title="接入方法"></a>接入方法</h3></blockquote>
</blockquote>
<p>1.初始化DFPlayer，设置数据源（必须）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[[DFPlayerManager shareInstance] df_initPlayerWithUserId:nil];//初始化</div><div class="line">[DFPlayerManager shareInstance].dataSource  = self;//设置数据源</div><div class="line">[[DFPlayerManager shareInstance] df_reloadData];//刷新数据源</div></pre></td></tr></table></figure></p>
<p>2.实现数据源，将音频数据传给DFPlayer（必须）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//（必须）</div><div class="line">- (NSArray&lt;DFPlayerModel *&gt; *)df_playerModelArray&#123;</div><div class="line">    //在这里将音频数据传给DFPlayer</div><div class="line">&#125;</div><div class="line"></div><div class="line">//（可选）</div><div class="line">- (DFPlayerInfoModel *)df_playerAudioInfoModel:(DFPlayerManager *)playerManager&#123;</div><div class="line">    //DFPlayer收到某个音频的播放请求时，会调用这个方法请求该音频的音频名、歌手、专辑名、歌词、配图等信息。</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.开始播放(必须)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[DFPlayerManager shareInstance] df_playerPlayWithAudioId:audioId];</div></pre></td></tr></table></figure></p>
<p>4.选择DFPLayer中提供的UI控件，布局到页面（可选）</p>
<ul>
<li>DFPlayer封装了歌词tableview（提供逐句和逐字两种模式的歌词同步）、缓冲条、进度条、播放类型按钮（单曲、顺序、随机）、播放暂停按钮、下一首按钮、上一首按钮、当前时间Label、总时间Label。</li>
<li>你只需要：<br>（1）同名更换DFPlayer.bundle中的图片<br>（2）调用DFPlayerControlManager.h中暴露出来的方法，布局到自己的页面，即可实现相应的功能，无需其他代码。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//使用示例：</div><div class="line">DFPlayerControlManager *manager = [DFPlayerControlManager shareInstance];</div><div class="line">//播放暂停按钮</div><div class="line">[manager df_playPauseBtnWithFrame:frame2 superView:superView block:nil];</div><div class="line">//下一首按钮</div><div class="line">[manager df_nextAudioBtnWithFrame:frame3 superView:superView block:nil];</div><div class="line">//上一首按钮</div><div class="line">[manager df_lastAudioBtnWithFrame:frame4 superView:superView block:nil];</div><div class="line">...等，详细查看‘详细文档’。</div></pre></td></tr></table></figure>
<p><br></p>
<div id="df-doc"></div>

<p><br></p>
<blockquote>
<blockquote>
<h3 id="详细文档-1"><a href="#详细文档-1" class="headerlink" title="详细文档"></a>详细文档</h3><blockquote>
<p>你一定会用到：</p>
<h4 id="1、DFPlayer-h（音频播放管理器）"><a href="#1、DFPlayer-h（音频播放管理器）" class="headerlink" title="1、DFPlayer.h（音频播放管理器）"></a><a href="#DFPlayer">1、DFPlayer.h（音频播放管理器）</a></h4><ul>
<li><h5 id="初始化和操作"><a href="#初始化和操作" class="headerlink" title="初始化和操作"></a><a href="#DFPlayer-init">初始化和操作</a></h5></li>
<li><h5 id="设置相关"><a href="#设置相关" class="headerlink" title="设置相关"></a><a href="#DFPlayer-set">设置相关</a></h5></li>
<li><h5 id="代理和数据源"><a href="#代理和数据源" class="headerlink" title="代理和数据源"></a><a href="#DFPlayer-delegate">代理和数据源</a></h5></li>
<li><h5 id="状态相关"><a href="#状态相关" class="headerlink" title="状态相关"></a><a href="#DFPlayer-status">状态相关</a></h5></li>
<li><h5 id="缓存和清理"><a href="#缓存和清理" class="headerlink" title="缓存和清理"></a><a href="#DFPlayer-cache">缓存和清理</a></h5></li>
</ul>
<h4 id="2、DFPlayerModel-h（数据model类）"><a href="#2、DFPlayerModel-h（数据model类）" class="headerlink" title="2、DFPlayerModel.h（数据model类）"></a><a href="#DFPlayerModel">2、DFPlayerModel.h（数据model类）</a></h4><p>你可能会用到：</p>
<h4 id="3、DFPlayerControlManager-h（音频控制管理器）"><a href="#3、DFPlayerControlManager-h（音频控制管理器）" class="headerlink" title="3、DFPlayerControlManager.h（音频控制管理器）"></a><a href="#DFPlayerControlManager">3、DFPlayerControlManager.h（音频控制管理器）</a></h4></blockquote>
</blockquote>
</blockquote>
<div id="DFPlayer">-</div>

<h3 id="DFPlayer-音频播放管理器"><a href="#DFPlayer-音频播放管理器" class="headerlink" title="DFPlayer(音频播放管理器)"></a>DFPlayer(音频播放管理器)</h3><div id="DFPlayer-init">-</div>

<ul>
<li><h4 id="初始化和操作-1"><a href="#初始化和操作-1" class="headerlink" title="初始化和操作"></a>初始化和操作</h4></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - 初始化和操作</span></div><div class="line"><span class="comment">/**单例方法*/</span></div><div class="line">+ (DFPlayer *)shareInstance;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 初始化播放器</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param userId 用户唯一Id。</span></div><div class="line"><span class="comment"> isNeedCache（默认YES）为YES时，若同一设备登录不同账号：</span></div><div class="line"><span class="comment"> 1.userId存在时，DFPlayer将为每位用户建立不同的缓存文件目录。例如，user_001,user_002...</span></div><div class="line"><span class="comment"> 2.userId为nil或@""时，统一使用DFPlayerCache文件夹下的user_public文件夹作为缓存目录。</span></div><div class="line"><span class="comment"> isNeedCache为NO时,userId设置无效，此时不会在沙盒创建缓存目录</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_initPlayerWithUserId:(<span class="built_in">NSString</span> *)userId;</div><div class="line"><span class="comment">/**刷新数据源数据*/</span></div><div class="line">- (<span class="keyword">void</span>)df_reloadData;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 选择audioId对应的音频开始播放。</span></div><div class="line"><span class="comment"> 说明：DFPlayer通过数据源方法提前获取数据，通过df_playerPlayWithAudioId选择音频加入播放队列</span></div><div class="line"><span class="comment"> 而在删除、增加音频后需要调用[[DFPlayer shareInstance] df_reloadData];刷新数据。</span></div><div class="line"><span class="comment"> DFPlayer内部实现里做了线程优化，合理范围内的大数据量也毫无压力。</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_playerPlayWithAudioId:(<span class="built_in">NSUInteger</span>)audioId;</div><div class="line"><span class="comment">/**实现远程线控功能，需替换main.m中UIApplicationMain函数的第三个参数。*/</span></div><div class="line">- (<span class="built_in">NSString</span> *)remoteControlClass;</div><div class="line"><span class="comment">/**释放播放器，还原其他播放器*/</span> </div><div class="line">- (<span class="keyword">void</span>)df_dellecPlayer;</div><div class="line"></div><div class="line"><span class="comment">/**播放*/</span></div><div class="line">- (<span class="keyword">void</span>)df_audioPlay;</div><div class="line"><span class="comment">/**暂停*/</span></div><div class="line">- (<span class="keyword">void</span>)df_audioPause;</div><div class="line"><span class="comment">/**下一首*/</span></div><div class="line">- (<span class="keyword">void</span>)df_audioNext;</div><div class="line"><span class="comment">/**上一首*/</span></div><div class="line">- (<span class="keyword">void</span>)df_audioLast;</div><div class="line"><span class="comment">/**音频跳转，value：时间百分比*/</span></div><div class="line">- (<span class="keyword">void</span>)df_seekToTimeWithValue:(<span class="built_in">CGFloat</span>)value;</div></pre></td></tr></table></figure>
<div id="DFPlayer-set">-</div>

<ul>
<li><h4 id="设置相关-1"><a href="#设置相关-1" class="headerlink" title="设置相关"></a>设置相关</h4></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//播放器类别</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>,DFPlayerAudioSessionCategory)&#123;</div><div class="line">    <span class="comment">//用于播放。随静音键和屏幕关闭而静音。不终止其它应用播放声音</span></div><div class="line">    DFPlayerAudioSessionCategoryAmbient,   </div><div class="line">    <span class="comment">//用于播放。随静音键和屏幕关闭而静音。终止其它应用播放声音     </span></div><div class="line">    DFPlayerAudioSessionCategorySoloAmbient,  </div><div class="line">     <span class="comment">//用于播放。不随静音键和屏幕关闭而静音。终止其它应用播放声音</span></div><div class="line">     <span class="comment">//需要在工程里设置targets-&gt;capabilities-&gt;选择backgrounds modes-&gt;勾选audio,airplay,and picture in picture  </span></div><div class="line">    DFPlayerAudioSessionCategoryPlayback,  </div><div class="line">    <span class="comment">//用于播放和录音。不随着静音键和屏幕关闭而静音。终止其他应用播放声音    </span></div><div class="line">    DFPlayerAudioSessionCategoryPlayAndRecord, </div><div class="line">    <span class="comment">//用于播放和录音。不随着静音键和屏幕关闭而静音。可多设备输出 </span></div><div class="line">    DFPlayerAudioSessionCategoryMultiRoute      </div><div class="line">&#125;;</div><div class="line"><span class="comment">//播放类型</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, DFPlayerType)&#123;</div><div class="line">    DFPlayerTypeOnlyOnce,       <span class="comment">//单曲只播放一次</span></div><div class="line">    DFPlayerTypeSingleCycle,    <span class="comment">//单曲循环。默认。</span></div><div class="line">    DFPlayerTypeOrderCycle,     <span class="comment">//顺序循环</span></div><div class="line">    DFPlayerTypeShuffleCycle    <span class="comment">//随机循环</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="keyword">id</span>&lt;DFPlayerDelegate&gt;    delegate;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="keyword">id</span>&lt;DFPlayerDataSource&gt;  dataSource;</div><div class="line"><span class="meta">#pragma mark - 设置类</span></div><div class="line"><span class="comment">/**播放器类型，默认DFPlayerAudioSessionCategorySoloAmbient*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) DFPlayerAudioSessionCategory category;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 播放类型，首次默认DFPlayerTypeSingleCycle。设置播放类型后，DFPlayer将为您记录用户的选择。</span></div><div class="line"><span class="comment"> 如需每次启动都设置固定某一个播放类型，请在初始化播放器后，调用[DFPlayer shareInstance].type = XX;重置播放类型。</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) DFPlayerType type;</div><div class="line"><span class="comment">/**是否监听播放进度，默认YES*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isObserveProgress;</div><div class="line"><span class="comment">/**是否监听缓冲进度，默认YES*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isObserveBufferProgress;</div><div class="line"><span class="comment">/**是否需要缓存，默认YES*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isNeedCache;</div><div class="line"><span class="comment">/**是否需要耳机线控功能，默认YES*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isRemoteControl;</div><div class="line"><span class="comment">/**是否监测上次关闭app时的音频信息，默认NO*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isObservePreviousAudioModel;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 在单曲循环模式下，点击下一首(上一首)按钮(或使用线控播放下一首、上一首)是重新开始播放当前音频还是播放下一首（上一首）</span></div><div class="line"><span class="comment"> 移动版QQ音乐是播放下一首（上一首），PC版QQ音乐是重新开始播放当前音频</span></div><div class="line"><span class="comment"> DFPlayer默认YES，即采用移动版QQ音乐设置。设置为NO时，重新开始播放当前音频</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isManualToPlay;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 当currentAudioModel存在时，是否插入耳机音频自动恢复播放，默认NO</span></div><div class="line"><span class="comment"> 当您没有实现代理10的情况下，DFPlaye默认拨出耳机音频自动停止，插入耳机音频不会自动恢复。你可通过此属性控制插入耳机时音频是否可自动恢复</span></div><div class="line"><span class="comment"> 当您实现代理10时，耳机插入拔出时的播放暂停逻辑由您处理。</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isHeadPhoneAutoPlay;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 是否监测WWAN无线广域网（2g/3g/4g）,默认NO。</span></div><div class="line"><span class="comment"> 播放本地音频（工程目录和沙盒文件）不监测。</span></div><div class="line"><span class="comment"> 播放网络音频时，DFPlayer为您实现wifi下自动播放，无网络有缓存播放缓存，无网络无缓存返回无网络错误码。</span></div><div class="line"><span class="comment"> 基于播放器具有循环播放的功能，开启该属性，无线广域网（WWAN）网络状态通过代理2返回。</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isObserveWWAN;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 是否监听服务器文件修改时间，默认NO。</span></div><div class="line"><span class="comment"> 在播放网络音频且需要DFPlayer的缓存功能的情况下，开启该属性，不必频繁更换服务端文件名来更新客户端播放内容。</span></div><div class="line"><span class="comment"> 比如，你的服务器上有audioname.mp3资源，若更改音频内容而需重新上传音频时，您不必更改文件名以保证客户端获取最新资源，本属性为YES即可完成。</span></div><div class="line"><span class="comment"> 第一次请求某资源时，DFPlayer缓存文件的同时会记录文件在服务器端的修改时间。</span></div><div class="line"><span class="comment"> 开启该属性，以后播放该资源时，DFPlayer会判断服务端文件是否修改过，修改过则加载新资源，没有修改过则播放缓存文件。</span></div><div class="line"><span class="comment"> 关闭此属性，有缓存时将直接播放缓存，不做更新校验，在弱网环境下播放响应速度更快。但您可自行实现每隔多少天或在哪一天检测的逻辑。</span></div><div class="line"><span class="comment"> 无网络连接时，有缓存直接播放缓存文件。</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isObserveFileModifiedTime;</div></pre></td></tr></table></figure>
<div id="DFPlayer-delegate">-</div>

<ul>
<li><h4 id="代理和数据源-1"><a href="#代理和数据源-1" class="headerlink" title="代理和数据源"></a>代理和数据源</h4></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">DFPlayerDataSource</span> &lt;<span class="title">NSObject</span>&gt;</span></div><div class="line"><span class="keyword">@required</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 数据源1：音频model数组</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">NSArray</span>&lt;DFPlayerModel *&gt; *)df_playerModelArray;</div><div class="line"><span class="keyword">@optional</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 数据源2：音频信息model</span></div><div class="line"><span class="comment"> 当DFPlayer收到播放请求时，会调用此方法请求当前音频的信息</span></div><div class="line"><span class="comment"> 根据player.currentAudioModel.audioId获取音频在数组中的位置,返回对应的音频信息model</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (DFPlayerInfoModel *)df_playerAudioInfoModel:(DFPlayer *)player;</div><div class="line"><span class="keyword">@end</span></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">DFPlayerDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></div><div class="line"><span class="keyword">@optional</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理1：音频将要加入播放队列</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_playerAudioWillAddToPlayQueue:(DFPlayer *)player;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理2：WWAN网络状态代理（isObserveWWAN（默认NO）为YES，网络状态为WWAN，且当前播放音频无缓存时发起）</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_playerNetworkDidChangeToWWAN:(DFPlayer *)player;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理3：准备开始播放代理</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_playerDidReadyToPlay:(DFPlayer *)player;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理4：缓冲进度代理  (属性isObserveBufferProgress(默认YES)为YES时有效）</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> @param bufferProgress 缓冲进度</span></div><div class="line"><span class="comment"> @param totalTime 音频总时长</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_player:(DFPlayer *)player</div><div class="line">   bufferProgress:(<span class="built_in">CGFloat</span>)bufferProgress</div><div class="line">        totalTime:(<span class="built_in">CGFloat</span>)totalTime;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理5：播放进度代理 （属性isObserveProgress(默认YES)为YES时有效）</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> @param progress 播放进度</span></div><div class="line"><span class="comment"> @param currentTime 当前播放到的时间</span></div><div class="line"><span class="comment"> @param totalTime 音频总时长</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_player:(DFPlayer *)player</div><div class="line">         progress:(<span class="built_in">CGFloat</span>)progress</div><div class="line">      currentTime:(<span class="built_in">CGFloat</span>)currentTime</div><div class="line">        totalTime:(<span class="built_in">CGFloat</span>)totalTime;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理6：当前音频缓存结果代理</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player FPlayer音频播放管理器</span></div><div class="line"><span class="comment"> @param isCached 是否缓存成功</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_player:(DFPlayer *)player isCached:(<span class="built_in">BOOL</span>)isCached;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理7：播放结束代理</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param player FPlayer音频播放管理器</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_playerDidPlayToEndTime:(DFPlayer *)player;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理8：播放失败代理</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> @param errorMessage 错误信息</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_player:(DFPlayer *)player didFailWithErrorMessage:(<span class="built_in">NSString</span> *)errorMessage;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理9：播放器被系统打断代理</span></div><div class="line"><span class="comment"> （DFPlayer默认被系统打断暂停播放，打断结束检测能够播放则恢复播放，如果实现此代理，打断逻辑由您处理）</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> @param isInterruptedBegin YES:被系统打断开始  NO:被系统打断结束</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_player:(DFPlayer *)player isInterruptedBegin:(<span class="built_in">BOOL</span>)isInterruptedBegin;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 代理10：监听耳机插入拔出代理</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param player DFPlayer音频播放管理器</span></div><div class="line"><span class="comment"> @param isHeadphone YES:插入 NO:拔出</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="keyword">void</span>)df_player:(DFPlayer *)player isHeadphone:(<span class="built_in">BOOL</span>)isHeadphone;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<div id="DFPlayer-status">-</div>

<ul>
<li><h4 id="状态相关-1"><a href="#状态相关-1" class="headerlink" title="状态相关"></a>状态相关</h4></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//播放器状态</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, DFPlayerState) &#123;</div><div class="line">    DFPlayerStateFailed,     <span class="comment">// 播放失败</span></div><div class="line">    DFPlayerStateBuffering,  <span class="comment">// 缓冲中</span></div><div class="line">    DFPlayerStatePlaying,    <span class="comment">// 播放中</span></div><div class="line">    DFPlayerStatePause,      <span class="comment">// 暂停播放</span></div><div class="line">    DFPlayerStateStopped     <span class="comment">// 停止播放</span></div><div class="line">&#125;;</div><div class="line"><span class="meta">#pragma mark - 状态类</span></div><div class="line"><span class="comment">/**播放器状态*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) DFPlayerState           state;</div><div class="line"><span class="comment">/**当前正在播放的音频model*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) DFPlayerModel           *currentAudioModel;</div><div class="line"><span class="comment">/**当前正在播放的音频信息model*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) DFPlayerInfoModel       *currentAudioInfoModel;</div><div class="line"><span class="comment">/**当前音频缓冲进度*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span>                 bufferProgress;</div><div class="line"><span class="comment">/**当前音频播放进度*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span>                 progress;</div><div class="line"><span class="comment">/**当前音频当前时间*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span>                 currentTime;</div><div class="line"><span class="comment">/**当前音频总时长*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span>                 totalTime;</div><div class="line"><span class="comment">/**上次关闭app时播放的音频信息。(属性isObservePreviousAudioModel（默认NO）为YES时有效)*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) DFPlayerPreviousAudioModel *previousAudioModel;</div></pre></td></tr></table></figure>
<div id="DFPlayer-cache">-</div>

<ul>
<li><h4 id="缓存和清理-1"><a href="#缓存和清理-1" class="headerlink" title="缓存和清理"></a>缓存和清理</h4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#pragma mark - 缓存相关</div><div class="line">/**</div><div class="line"> url对应音频是否已经在本地缓存</div><div class="line"> </div><div class="line"> @param url 网络音频url</div><div class="line"> @return 有缓存返回缓存地址，无缓存返回nil</div><div class="line"> */</div><div class="line">+ (NSString *)df_playerCheckIsCachedWithUrl:(NSURL *)url;</div><div class="line"> /**</div><div class="line"> 清除url对应的本地缓存</div><div class="line"></div><div class="line"> @param url 网络音频url</div><div class="line"> @param block 是否清除成功 错误信息</div><div class="line"> */</div><div class="line">+ (void)df_playerClearCacheWithUrl:(NSURL *)url </div><div class="line">                             block:(void(^)(BOOL isSuccess, NSError *error))block;</div><div class="line">/**</div><div class="line"> 计算DFPlayer的缓存大小</div><div class="line"></div><div class="line"> @param isCurrentUser YES:计算当前用户缓存大小  NO:计算所有用户缓存大小</div><div class="line"> @return 大小</div><div class="line"> */</div><div class="line">+ (CGFloat)df_playerCountCacheSizeForCurrentUser:(BOOL)isCurrentUser;</div><div class="line">/**</div><div class="line"> 清除DFPlayer产生的缓存</div><div class="line"></div><div class="line"> @param isClearCurrentUser YES:清除当前用户缓存  NO:清除所有用户缓存</div><div class="line"> @param block 是否清除成功 错误信息</div><div class="line"> */</div><div class="line">+ (void)df_playerClearCacheForCurrentUser:(BOOL)isClearCurrentUser</div><div class="line">                                    block:(void(^)(BOOL isSuccess, NSError *error))block;</div><div class="line">/**计算系统磁盘空间 剩余可用空间*/</div><div class="line">+ (void)df_countSystemSizeBlock:(void(^)(CGFloat totalSize,CGFloat freeSize,BOOL isSuccess))block;</div></pre></td></tr></table></figure>
<div id="DFPlayerModel">-</div>

<h3 id="DFPlayerModel-DFPlayer数据model类"><a href="#DFPlayerModel-DFPlayer数据model类" class="headerlink" title="DFPlayerModel(DFPlayer数据model类)"></a>DFPlayerModel(DFPlayer数据model类)</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 数据model类（必传属性） - IMPORTANT</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DFPlayerModel</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="comment">/**音频Id。仅标识当前音频在数组中的位置*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">NSUInteger</span> audioId;</div><div class="line"><span class="comment">/**音频地址*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">nonnull</span>, <span class="keyword">strong</span>) <span class="built_in">NSURL</span> *audioUrl;</div><div class="line"><span class="keyword">@end</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 音频信息model类（非必传属性）</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DFPlayerInfoModel</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="comment">/**歌词*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *audioLyric;</div><div class="line"><span class="comment">/*当您正确传入以下属性时，DFPlayer将自动为您设置锁屏模式和控制中心的播放信息展示*/</span></div><div class="line"><span class="comment">/**音频名*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *audioName;</div><div class="line"><span class="comment">/**专辑名*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *audioAlbum;</div><div class="line"><span class="comment">/**歌手名*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *audioSinger;</div><div class="line"><span class="comment">/**音频配图*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">UIImage</span> *audioImage;</div><div class="line"><span class="keyword">@end</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 此model主要用于重新进入app时获取上次播放的音频信息</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DFPlayerPreviousAudioModel</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">/**音频Id*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">NSUInteger</span> audioId;</div><div class="line"><span class="comment">/**音频地址*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">nonnull</span>, <span class="keyword">strong</span>) <span class="built_in">NSURL</span> *audioUrl;</div><div class="line"><span class="comment">/**音频当前播放到的时间*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> currentTime;</div><div class="line"><span class="comment">/**音频总时长*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> totalTime;</div><div class="line"><span class="comment">/**音频播放进度*/</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> progress;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<div id="DFPlayerControlManager">-</div>

<h3 id="DFPlayerControlManager-DFPlayer音频控制管理器"><a href="#DFPlayerControlManager-DFPlayer音频控制管理器" class="headerlink" title="DFPlayerControlManager(DFPlayer音频控制管理器)"></a>DFPlayerControlManager(DFPlayer音频控制管理器)</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> DFPlayer控制管理器</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DFPlayerControlManager</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="comment">/**单利方法*/</span></div><div class="line">+ (DFPlayerControlManager *_Nullable)shareInstance;</div><div class="line"><span class="comment">/**调用该方法将停止更新与进度相关的UI控件（除了歌词tableview）的刷新*/</span></div><div class="line">- (<span class="keyword">void</span>)df_stopUpdateProgress;</div><div class="line"><span class="comment">/**调用该方法将恢复更新与进度相关的UI控件（除了歌词tableview）的刷新*/</span></div><div class="line">- (<span class="keyword">void</span>)df_resumeUpdateProgress;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 播放暂停按钮(背景图片在DFPlayer.bundle中同名替换相应的图片即可)</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param frame 按钮frame</span></div><div class="line"><span class="comment"> @param superView 按钮父视图</span></div><div class="line"><span class="comment"> @param block 按钮action 若无其他操作需求，传nil即可</span></div><div class="line"><span class="comment"> @return 播放暂停按钮</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UIButton</span> *_Nullable)df_playPauseBtnWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                      superView:(<span class="built_in">UIView</span> *_Nonnull)superView</div><div class="line">                                          block:(<span class="keyword">void</span>(^_Nullable)(<span class="keyword">void</span>))block;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 上一首按钮(背景图片在DFPlayer.bundle中同名替换相应的图片即可)</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param frame 按钮frame</span></div><div class="line"><span class="comment"> @param superView 按钮父视图</span></div><div class="line"><span class="comment"> @param block 按钮action 若无其他操作需求，传nil即可</span></div><div class="line"><span class="comment"> @return 上一首按钮</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UIButton</span> *_Nullable)df_lastAudioBtnWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                      superView:(<span class="built_in">UIView</span> *_Nonnull)superView</div><div class="line">                                          block:(<span class="keyword">void</span>(^_Nullable)(<span class="keyword">void</span>))block;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 下一首按钮(背景图片在DFPlayer.bundle中同名替换相应的图片即可)</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param frame 按钮frame</span></div><div class="line"><span class="comment"> @param superView 按钮父视图</span></div><div class="line"><span class="comment"> @param block 按钮action 若无其他操作需求，传nil即可</span></div><div class="line"><span class="comment"> @return 下一首按钮</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UIButton</span> *_Nullable)df_nextAudioBtnWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                      superView:(<span class="built_in">UIView</span> *_Nonnull)superView</div><div class="line">                                          block:(<span class="keyword">void</span>(^_Nullable)(<span class="keyword">void</span>))block;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 播放模式按钮(单曲循环，顺序循环，随机循环）（DFPlayerType为DFPlayerTypeOnlyOnce时此按钮无效）</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param frame 按钮frame</span></div><div class="line"><span class="comment"> @param superView 按钮父视图</span></div><div class="line"><span class="comment"> @param block 按钮action 若无其他操作需求，传nil即可</span></div><div class="line"><span class="comment"> @return 播放类型设置按钮</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> * 注意：当设置了DFPlayer的播放类型以后，DFPlayer将为您记录用户的选择，并在下次启动app时选择用户设置的播放类型。</span></div><div class="line"><span class="comment"> 如需每次启动都设置固定某一个播放类型，请在初始化播放器后，调用[DFPlayer shareInstance].type = XX;重置播放类型。</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UIButton</span> *_Nullable)df_typeControlBtnWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                        superView:(<span class="built_in">UIView</span> *_Nonnull)superView</div><div class="line">                                            block:(<span class="keyword">void</span>(^_Nullable)(<span class="keyword">void</span>))block;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 缓冲进度条</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param frame frame</span></div><div class="line"><span class="comment"> @param trackTintColor 未缓冲部分进度条颜色</span></div><div class="line"><span class="comment"> @param progressTintColor 已缓冲部分进度条颜色</span></div><div class="line"><span class="comment"> @param superView 进度条父视图</span></div><div class="line"><span class="comment"> @return 进度条</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UIProgressView</span> *_Nullable)df_bufferProgressViewWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                    trackTintColor:(<span class="built_in">UIColor</span> *_Nonnull)trackTintColor</div><div class="line">                                 progressTintColor:(<span class="built_in">UIColor</span> *_Nonnull)progressTintColor</div><div class="line">                                         superView:(<span class="built_in">UIView</span> *_Nonnull)superView;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 播放进度条</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param frame frame</span></div><div class="line"><span class="comment"> @param minimumTrackTintColor 滑块左边滑动条的颜色</span></div><div class="line"><span class="comment"> @param maximumTrackTintColor 滑块右边滑动条的颜色</span></div><div class="line"><span class="comment"> @param trackHeight 滑动条的高度(长度采用frame的width)</span></div><div class="line"><span class="comment"> @param thumbSize 滑块的大小</span></div><div class="line"><span class="comment"> @param superView 进度条父视图</span></div><div class="line"><span class="comment"> @return 进度条</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UISlider</span> *_Nullable)df_sliderWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                   minimumTrackTintColor:(<span class="built_in">UIColor</span> *_Nonnull)minimumTrackTintColor</div><div class="line">                   maximumTrackTintColor:(<span class="built_in">UIColor</span> *_Nonnull)maximumTrackTintColor</div><div class="line">                             trackHeight:(<span class="built_in">CGFloat</span>)trackHeight</div><div class="line">                               thumbSize:(<span class="built_in">CGSize</span>)thumbSize</div><div class="line">                               superView:(<span class="built_in">UIView</span> *_Nonnull)superView;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 音频当前时间label</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param frame frame</span></div><div class="line"><span class="comment"> @param superView label父视图</span></div><div class="line"><span class="comment"> @return label</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UILabel</span> *_Nullable)df_currentTimeLabelWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                superView:(<span class="built_in">UIView</span> *_Nonnull)superView;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> 音频总时长label</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"> @param frame frame</span></div><div class="line"><span class="comment"> @param superView label父视图</span></div><div class="line"><span class="comment"> @return label</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UILabel</span> *_Nullable)df_totalTimeLabelWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                              superView:(<span class="built_in">UIView</span> *_Nonnull)superView;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> lyricTableview</span></div><div class="line"><span class="comment"> ①采用lrc标准格式编写，即"[00:00.00]歌词" 或 "[00:00]歌词" 或 "[00:00:00]歌词"</span></div><div class="line"><span class="comment"> ②根据lrc歌词软件开发标准，凡具有“[*:*]”形式的都应认为是标签（注意：其中的冒号并非全角字符“：”）。凡是标签都不应显示。</span></div><div class="line"><span class="comment"> ③支持单句歌词多个时间的格式，如“[00:10.00][00:50.00][00:70.00]歌词”</span></div><div class="line"><span class="comment"> ④lrc歌词文件单行只有时间标签，没有歌词内容的，将被认作为上一个相邻时间内歌词的结束时间,并不做空行显示处理。比如</span></div><div class="line"><span class="comment"> [00:11.11]歌词</span></div><div class="line"><span class="comment"> [00:22.22] （22秒22毫米，该时间下无歌词显示，将被认作为上一个相邻时间歌词的演唱结束时间，此处的相邻不是位置的相邻，而是时间大小的相邻）</span></div><div class="line"><span class="comment"> ⑤如果歌词中需要空行，DFPlayer默认时间标签后的“####”是空行标志，如“[00:11.11]####”，DFPlayer将在解析到歌词为####时做空行显示</span></div><div class="line"><span class="comment"> 详情查看demo中”许嵩(Vae)-有何不可.lrc“文件</span></div><div class="line"><span class="comment"> ⑥DFPlayer认为每个时间标签都是一个单元格。只不过时间标签后无歌词时，DFPlayer将该单元格隐藏。</span></div><div class="line"><span class="comment"> ⑦DFPlayer不对单句歌词做换行处理，所以单行歌词长度尽量不要超过tableview的宽度，当超出时，DFPlayer用省略号处理。</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment"> @param frame  tableview frame</span></div><div class="line"><span class="comment"> @param contentInset  tableview contentInset</span></div><div class="line"><span class="comment"> @param cellRowHeight  tableview 单行rowHeight</span></div><div class="line"><span class="comment"> @param cellBackgroundColor cell背景色</span></div><div class="line"><span class="comment"> @param currentLineLrcForegroundTextColor 当前行歌词文字前景色（此属性不为空时，采用卡拉OK模式显示）</span></div><div class="line"><span class="comment"> @param currentLineLrcBackgroundTextColor 当前行歌词文字背景色</span></div><div class="line"><span class="comment"> @param otherLineLrcBackgroundTextColor 其他行歌词文字颜色</span></div><div class="line"><span class="comment"> @param currentLineLrcFont 当前行歌词字体</span></div><div class="line"><span class="comment"> @param otherLineLrcFont 其他行歌词字体</span></div><div class="line"><span class="comment"> @param superView 父视图</span></div><div class="line"><span class="comment"> @param clickBlock 点击某个歌词cell。indexpath：该行cell的indexpath</span></div><div class="line"><span class="comment"> @return 歌词tableView</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="built_in">UITableView</span> *_Nullable)df_lyricTableViewWithFrame:(<span class="built_in">CGRect</span>)frame</div><div class="line">                                        contentInset:(<span class="built_in">UIEdgeInsets</span>)contentInset</div><div class="line">                                       cellRowHeight:(<span class="built_in">CGFloat</span>)cellRowHeight</div><div class="line">                                 cellBackgroundColor:(<span class="built_in">UIColor</span> *_Nullable)cellBackgroundColor</div><div class="line">                   currentLineLrcForegroundTextColor:(<span class="built_in">UIColor</span> *_Nullable)currentLineLrcForegroundTextColor</div><div class="line">                   currentLineLrcBackgroundTextColor:(<span class="built_in">UIColor</span> *_Nonnull)currentLineLrcBackgroundTextColor</div><div class="line">                     otherLineLrcBackgroundTextColor:(<span class="built_in">UIColor</span> *_Nonnull)otherLineLrcBackgroundTextColor</div><div class="line">                                  currentLineLrcFont:(<span class="built_in">UIFont</span> *_Nonnull)currentLineLrcFont</div><div class="line">                                    otherLineLrcFont:(<span class="built_in">UIFont</span> *_Nonnull)otherLineLrcFont</div><div class="line">                                           superView:(<span class="built_in">UIView</span> *_Nonnull)superView</div><div class="line">                                          clickBlock:(<span class="keyword">void</span>(^_Nullable)(<span class="built_in">NSIndexPath</span> * _Nullable indexpath))clickBlock;</div><div class="line"><span class="comment">/**DFPlayer不管理lyricTableview中歌词更新的暂停和恢复*/</span></div><div class="line"><span class="comment">/**停止更新lyricTableview中歌词的刷新*/</span></div><div class="line">- (<span class="keyword">void</span>)df_playerLyricTableviewStopUpdate;</div><div class="line"><span class="comment">/**恢复更新lyricTableview中歌词的刷新*/</span></div><div class="line">- (<span class="keyword">void</span>)df_playerLyricTableviewResumeUpdate;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>   – If possible, please give me a star in github. -</p>
<h1 id="END-and-THANKS"><a href="#END-and-THANKS" class="headerlink" title="END and THANKS!"></a>END and THANKS!</h1><h1 id="LOVE-YOU！🌹"><a href="#LOVE-YOU！🌹" class="headerlink" title="LOVE YOU！🌹"></a>LOVE YOU！🌹</h1>

      

    </section>
    
      <section class='ArticleMeta'>
          <div>
            发布于&nbsp;
            <time datetime="2017-10-26T07:02:12.000Z" itemprop="datePublished">
              2017-10-26
            </time>
          </div>
          
            <div>
              tags: 
  <li class="meta-text">
  { <a href="/tags/iOS开发/">iOS开发</a> }
  </li>


            </div>
          
      </section>
    
    
</article>

  
</div>

            <footer>
    <div>
    	© 2017 - ihoudf .powered by Hexo
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>